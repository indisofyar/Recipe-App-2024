import{d as M,r,T as z,U as F,V as D,g as u,i as b,j as s,u as l,k as a,I as R,l as U,E as _,F as E,t as d,q as Y,s as n,H as W,J as C,W as j,X as y,O as f,Y as g,Z as S,M as q,x as T,A as G,B as J,$ as X,a0 as Z,y as O,a1 as K,a2 as Q,P as ee,G as le,a3 as ae}from"./index-82be729b.js";import{a as k,b as I}from"./axios-0576eea1.js";const te={class:"table"},se=["onClick"],de={__name:"MealPlanTool",setup(oe){M(()=>({name:"",profilePic:""}));const v=r([["Monday",!1,!1,!1],["Tuesday",!1,!1,!1],["Wednesday",!1,!1,!1],["Thursday",!1,!1,!1],["Friday",!1,!1,!1],["Saturday",!1,!1,!1],["Sunday",!1,!1,!1]]),V=(o,e,t,m)=>{typeof o=="boolean"&&(m[t]=!m[t])},p=r([{text:"Any amount",textSecondHalf:" of vegetarian meals",number:null,type:"vegetarian"},{text:"Any amount",textSecondHalf:" of vegan meals",number:null,type:"vegan"}]),H=M(()=>{let o=0;for(const e of v.value)for(const t of e)t&&typeof t=="boolean"&&o++;return o++});function h(o,e){if(o==="increase"){if(e.number!=null&&(e.number||0)+1>H.value){L("You can't increase the number of ".concat(e.type," meals as you've only selected ").concat(H.value," meals. Select more meals from the table."));return}e.number==null?(e.number=0,e.text=e.number,e.textSecondHalf=e.textSecondHalf.replace("of ","")):(e.number++,e.text=e.number,e.number==1?e.textSecondHalf=e.textSecondHalf.replace(" meals"," meal"):e.number==2&&(e.textSecondHalf=e.textSecondHalf.replace(" meal"," meals")))}else o==="decrease"&&(e.number<=0?(e.number=null,e.text="Any amount",e.textSecondHalf=" of "+e.type+" meals"):(e.number--,e.text=e.number),e.number==1?e.textSecondHalf=e.textSecondHalf.replace(" meals"," meal"):e.number==0&&(e.textSecondHalf=e.textSecondHalf.replace(" meal"," meals")))}const c=r(!1),B=r("");function L(o){c.value=!0,B.value=o,setTimeout(()=>{c.value=!1},4e3)}z(),F();const P=D(),$=r([]);function w(){k.get(I+"/api/recipes/recipes/").then(o=>{$.value=o.data})}w();const x=r("This Week"),A=async o=>{const e=await X.create({message:"Creating schedule...",duration:5e3});e.present(),k.post(I+"/api/recipes/create-schedule/",{selectMealTable:v.value,preferences:p.value,week:x.value}).then(t=>{e.dismiss(),P.push({name:"recipe-schedule"})})};return k.post(I+"/api/user/token/refresh/",{refresh:refreshToken}).then(o=>{localStorage.setItem("accessToken",o.data.access),accessToken=localStorage.getItem("accessToken"),accessTokenFull="Bearer "+accessToken,k.defaults.headers.common.Authorization=accessTokenFull,getShoppingList()}).catch(o=>loaded.value=!0),(o,e)=>(u(),b(l(J),null,{default:s(()=>[a(l(Y),null,{default:s(()=>[a(l(R),null,{default:s(()=>[a(l(U),{slot:"start"},{default:s(()=>[a(l(_),{text:"Back"})]),_:1}),a(l(E),null,{default:s(()=>e[2]||(e[2]=[d("Plan your Meals")])),_:1})]),_:1})]),_:1}),a(l(G),{class:"ion-padding"},{default:s(()=>[e[10]||(e[10]=n("h4",null,"Select Week",-1)),a(l(W),null,{default:s(()=>[a(l(C),null,{default:s(()=>[a(l(j),{label:"Week",modelValue:x.value,"onUpdate:modelValue":e[0]||(e[0]=t=>x.value=t)},{default:s(()=>[a(l(y),{value:"This Week"},{default:s(()=>e[3]||(e[3]=[d("This Week")])),_:1}),a(l(y),{value:"Next Week"},{default:s(()=>e[4]||(e[4]=[d("Next Week")])),_:1}),a(l(y),{value:"Other"},{default:s(()=>e[5]||(e[5]=[d("Other")])),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e[11]||(e[11]=n("h4",null,"Select Meals",-1)),n("table",te,[e[6]||(e[6]=n("tr",null,[n("th"),n("th",null," Breakfast "),n("th",null," Lunch "),n("th",null," Dinner ")],-1)),(u(!0),f(S,null,g(v.value,(t,m)=>(u(),f("tr",null,[(u(!0),f(S,null,g(t,(i,N)=>(u(),f("td",{onClick:ue=>V(i,m,N,t),style:Z([{height:"50px"},typeof i=="boolean"?"text-align:center;":""])},[typeof i=="boolean"&&i?(u(),b(l(O),{key:0,icon:l(K),size:"large"},null,8,["icon"])):typeof i=="boolean"&&!i?(u(),b(l(O),{key:1,icon:l(Q),color:"light"},null,8,["icon"])):ee("",!0),d(" "+le(typeof i=="string"?i:""),1)],12,se))),256))]))),256))]),e[12]||(e[12]=n("h4",null,"Preferences",-1)),a(l(W),null,{default:s(()=>[(u(!0),f(S,null,g(p.value,t=>(u(),b(l(C),null,{default:s(()=>[a(l(ae),{innerHTML:"<b>"+t.text+"</b>"+t.textSecondHalf},null,8,["innerHTML"]),a(l(T),{fill:"outline",size:"medium",onClick:m=>h("decrease",t)},{default:s(()=>e[7]||(e[7]=[d("-")])),_:2},1032,["onClick"]),a(l(T),{fill:"outline",size:"medium",onClick:m=>h("increase",t)},{default:s(()=>e[8]||(e[8]=[d("+")])),_:2},1032,["onClick"])]),_:2},1024))),256))]),_:1}),a(l(q),{"is-open":c.value,message:B.value,duration:3e3,onDidDismiss:e[1]||(e[1]=t=>c.value=!1)},null,8,["is-open","message"]),a(l(T),{color:"primary",onClick:A},{default:s(()=>e[9]||(e[9]=[d("Create Schedule")])),_:1})]),_:1})]),_:1}))}};export{de as default};
