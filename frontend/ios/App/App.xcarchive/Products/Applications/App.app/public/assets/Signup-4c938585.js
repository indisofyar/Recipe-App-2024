import{e as N,r as l,C as I,d as k,N as P,g as q,i as L,j as t,k as a,u as s,I as M,l as U,F as A,t as p,q as F,s as n,H,J as T,Q as V,x as b,R as j,M as z,A as x,B as E,P as J,_ as Q}from"./index-82be729b.js";import{_ as R}from"./appicon-b1060d54.js";import{a as c,b as S}from"./axios-0576eea1.js";const D={class:"ion-padding"},G=N({__name:"Signup",setup(K){const f=l(!1);let r=localStorage.getItem("accessToken"),_="Bearer "+r;const w=localStorage.getItem("refreshToken");c.post(S+"/api/user/token/refresh/",{refresh:w}).then(o=>{localStorage.setItem("accessToken",o.data.access),r=localStorage.getItem("accessToken"),_="Bearer "+r,c.defaults.headers.common.Authorization=_,I.push({name:"meal-planner"})}).catch(o=>f.value=!0);const u=l(""),d=l(""),B=l(!1),g=l(!1),v=l(""),C=k(()=>!0),y=k(()=>!0),h=()=>{B.value=!0,C.value&&y.value&&c.post(S+"/api/user/register/",{email:u.value,password:d.value,name:"filler",tc:!0}).then(o=>{I.push({name:"meal-planner"})}).catch(o=>{let e="";for(const i of o.response.data.errors.email)e+=i;v.value=e,g.value=!0})};return(o,e)=>{const i=P("router-link");return f.value?(q(),L(s(E),{key:0},{default:t(()=>[a(s(F),null,{default:t(()=>[a(s(M),null,{default:t(()=>[a(s(U),{slot:"start"}),a(s(A),null,{default:t(()=>e[2]||(e[2]=[p("Signup")])),_:1})]),_:1})]),_:1}),a(s(x),{class:"ion-padding"},{default:t(()=>[e[5]||(e[5]=n("div",{class:"signup-logo"},[n("img",{src:R,alt:"Ionic Logo"})],-1)),n("form",{onSubmit:j(h,["prevent"])},[a(s(H),null,{default:t(()=>[a(s(T),null,{default:t(()=>[a(s(V),{labelPlacement:"stacked",label:"Email",modelValue:u.value,"onUpdate:modelValue":e[0]||(e[0]=m=>u.value=m),name:"username",type:"text",required:""},null,8,["modelValue"])]),_:1}),a(s(T),null,{default:t(()=>[a(s(V),{labelPlacement:"stacked",label:"Password",modelValue:d.value,"onUpdate:modelValue":e[1]||(e[1]=m=>d.value=m),name:"password",type:"password",required:""},null,8,["modelValue"])]),_:1})]),_:1}),n("div",D,[a(s(b),{type:"submit",expand:"block"},{default:t(()=>e[3]||(e[3]=[p("Create account")])),_:1})])],32),a(s(z),{"is-open":g.value,message:v.value,duration:2e3},null,8,["is-open","message"]),a(s(x),null,{default:t(()=>[a(i,{to:"/login"},{default:t(()=>[a(s(b),{fill:"clear"},{default:t(()=>e[4]||(e[4]=[p("Login")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):J("",!0)}}});const Y=Q(G,[["__scopeId","data-v-95944279"]]);export{Y as default};
