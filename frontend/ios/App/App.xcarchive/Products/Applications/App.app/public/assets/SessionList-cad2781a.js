import{e as Q,r as g,am as B,a as X,an as pe,g as m,i as _,j as a,k as t,u as e,q as V,I as x,l as y,x as h,t as u,F as ee,A as te,H as ae,ao as le,O as G,Z as E,Y as O,J as oe,y as S,ap as ve,G as F,aq as ge,B as se,ar as ne,D as ke,af as Ie,d as M,w as N,m as Se,K as Fe,as as _e,at as q,au as Te,av as Ce,f as J,v as K,aw as ye,ax as b,ay as we,az as be,aA as he,aB as xe,aC as Le,aD as De,a8 as Be,$ as $e,aE as Ae,aF as Ve,a3 as W,aG as Ge,a0 as Ee,s as j,aH as Oe,aI as U,P as Y,aJ as Z,_ as Re}from"./index-82be729b.js";import{d as A}from"./dateFormat-29e8f929.js";const Pe=Q({__name:"SessionListFilter",props:{excludedTracks:{type:Array,default:()=>[]},allTracks:{type:Array,default:()=>[]}},setup(R,{emit:k}){const T=R,w=k,C=g([]);g(T.allTracks.map(c=>c.name));const L=B.state.sessions.isFirstLoad;X(()=>{const c=T.allTracks.length?T.allTracks:[],o=B.state.sessions.selectedTrackFilters;C.value=c.map(d=>({name:d.name,icon:pe[d.icon],isChecked:L?!0:o.includes(d.name)})),L&&B.commit("setFirstLoad",!1)});const r=()=>ne.dismiss(),$=()=>{const c=C.value.filter(o=>o.isChecked).map(o=>o.name);B.dispatch("setSelectedTrackFilters",c),w("filtersSelected",c),r()},v=c=>{C.value.forEach(o=>o.isChecked=c)};return(c,o)=>(m(),_(e(se),null,{default:a(()=>[t(e(V),null,{default:a(()=>[t(e(x),null,{default:a(()=>[t(e(y),{slot:"start"},{default:a(()=>[t(e(h),{onClick:r},{default:a(()=>o[2]||(o[2]=[u("Cancel")])),_:1})]),_:1}),t(e(ee),null,{default:a(()=>o[3]||(o[3]=[u(" Filter Sessions ")])),_:1}),t(e(y),{slot:"end"},{default:a(()=>[t(e(h),{onClick:$,strong:""},{default:a(()=>o[4]||(o[4]=[u("Done")])),_:1})]),_:1})]),_:1})]),_:1}),t(e(te),{class:"outer-content"},{default:a(()=>[t(e(ae),null,{default:a(()=>[t(e(le),null,{default:a(()=>o[5]||(o[5]=[u("Tracks")])),_:1}),(m(!0),G(E,null,O(C.value,d=>(m(),_(e(oe),{key:d.name},{default:a(()=>[t(e(S),{slot:"start",icon:d.icon,color:"primary"},null,8,["icon"]),t(e(ve),{onIonChange:P=>d.isChecked=!d.isChecked,checked:d.isChecked,color:"success"},{default:a(()=>[u(F(d.name),1)]),_:2},1032,["onIonChange","checked"])]),_:2},1024))),128))]),_:1})]),_:1}),t(e(ge),{translucent:!0},{default:a(()=>[t(e(x),null,{default:a(()=>[t(e(y),{slot:"start"},{default:a(()=>[t(e(h),{onClick:o[0]||(o[0]=d=>v(!1))},{default:a(()=>o[6]||(o[6]=[u("Deselect All")])),_:1})]),_:1}),t(e(y),{slot:"end"},{default:a(()=>[t(e(h),{onClick:o[1]||(o[1]=d=>v(!0))},{default:a(()=>o[7]||(o[7]=[u("Select All")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}}),ze=Q({__name:"SessionList",setup(R){const k=g("all"),T=g(""),w=g(null),C=g(null),L=g(null),r=ke(),$=Ie(),v=g([]),c=M(()=>v.value),o=s=>[...s].sort((f,i)=>new Date(f.dateTimeStart).getTime()-new Date(i.dateTimeStart).getTime()).reduce((f,i)=>{const n=new Date(i.dateTimeStart);n.setMinutes(0,0,0);const I=n.toISOString(),H=f.find(me=>me.startTime===I);return H?H.sessions.push(i):f.push({startTime:I,sessions:[i]}),f},[]),d=M(()=>k.value==="all"?o(r.getters.allFiltered):o(r.getters.favoritesFiltered));N(d,s=>{v.value=s});const P=s=>{let l=s==="Ionic"?"primary":s.toLowerCase();return{borderLeft:"2px solid var(--ion-color-".concat(l,")"),paddingLeft:"10px"}},re=async(s,l)=>{r.state.sessions.favoriteSessions.indexOf(l.id)!==-1?z(s,l,"Favorite already added"):(r.dispatch("addFavorite",l.id),await(await Z.create({header:"Favorite Added",buttons:[{text:"OK",handler:()=>{s.target.closest("ion-item-sliding").close()}}]})).present())},z=async(s,l,p)=>{await(await Z.create({header:p,message:"Would you like to remove this session from your favorites?",buttons:[{text:"Cancel",handler:()=>{s.target.closest("ion-item-sliding").close()}},{text:"Remove",handler:()=>{r.dispatch("removeFavorite",l.id),s.target.closest("ion-item-sliding").close()}}]})).present()},ie=s=>{$.push({name:"session-detail",params:{sessionId:s.id.toString()}})},de=async()=>{const s=await ne.create({component:Pe,presentingElement:Be.nativeEl,componentProps:{excludedTracks:r.state.sessions.trackFilters,allTracks:r.getters.allTracksFilter}});s.componentProps.onFiltersSelected=async l=>{if(l.length===0)v.value=[];else{await r.dispatch("loadSessionData"),await r.dispatch("loadSpeakerData"),await r.dispatch("fetchTracks");const p=r.state.sessions.trackFilters,f=l.filter(n=>!p.includes(n)),i=p.filter(n=>!l.includes(n));f.forEach(n=>r.dispatch("addTrackFilter",n)),i.forEach(n=>r.dispatch("removeTrackFilter",n))}},await s.present()},ue=s=>{k.value=s.detail.value},ce=s=>{r.dispatch("setSearchText",s.detail.value)},D=async s=>{if(w.value){const l=await $e.create({message:"Posting to ".concat(s),duration:Math.random()*1e3+500});await l.present(),await l.onWillDismiss(),w.value.close()}},fe=async()=>{v.value.length===0&&(await r.dispatch("loadSessionData"),await r.dispatch("loadSpeakerData"),await r.dispatch("fetchTracks"))};return X(()=>{Se.enable(!0),fe(),N(()=>r.getters.allFiltered,s=>{v.value=o(s)})}),(s,l)=>(m(),_(e(se),null,{default:a(()=>[t(e(V),{translucent:!0},{default:a(()=>[t(e(x),null,{default:a(()=>[t(e(y),{slot:"start"},{default:a(()=>[t(e(Fe))]),_:1}),t(e(_e),{value:k.value,onIonChange:ue},{default:a(()=>[t(e(q),{value:"all"},{default:a(()=>l[6]||(l[6]=[u("All")])),_:1}),t(e(q),{value:"favorites"},{default:a(()=>l[7]||(l[7]=[u("Favorites")])),_:1})]),_:1},8,["value"]),t(e(y),{slot:"end"},{default:a(()=>[t(e(h),{onClick:de},{default:a(()=>[t(e(S),{slot:"icon-only",icon:e(Te)},null,8,["icon"])]),_:1})]),_:1})]),_:1})]),_:1}),t(e(te),{fullscreen:!0},{default:a(()=>{var p,f;return[t(e(V),{collapse:"condense"},{default:a(()=>[t(e(x),null,{default:a(()=>[t(e(ee),{size:"large"},{default:a(()=>l[8]||(l[8]=[u("Schedule")])),_:1})]),_:1}),t(e(x),null,{default:a(()=>[t(e(Ce),{modelValue:T.value,"onUpdate:modelValue":l[0]||(l[0]=i=>T.value=i),debounce:500,onIonInput:l[1]||(l[1]=i=>ce(i)),placeholder:"Search"},null,8,["modelValue"])]),_:1})]),_:1}),J(t(e(ae),null,{default:a(()=>[(m(!0),G(E,null,O(c.value,i=>(m(),_(e(Ae),{key:i.id},{default:a(()=>[t(e(Ve),{sticky:""},{default:a(()=>[t(e(W),null,{default:a(()=>[u(F(e(A)(i.startTime,"h:mm a")),1)]),_:2},1024)]),_:2},1024),(m(!0),G(E,null,O(i.sessions,n=>(m(),_(e(Ge),{key:n.id,"data-track":n.tracks[0].toLowerCase()},{default:a(()=>[t(e(oe),{button:"",onClick:I=>ie(n)},{default:a(()=>[t(e(W),{style:Ee(P(n.tracks[0]))},{default:a(()=>[j("h3",null,F(n.tracks[0])+" - "+F(n.name),1),j("p",null,F(e(A)(n.dateTimeStart,"h:mm a"))+" â€” "+F(e(A)(n.dateTimeEnd,"h:mm a"))+": "+F(n.location),1)]),_:2},1032,["style"])]),_:2},1032,["onClick"]),t(e(Oe),null,{default:a(()=>[k.value==="all"?(m(),_(e(U),{key:0,color:"favorite",onClick:I=>re(I,n)},{default:a(()=>l[9]||(l[9]=[u("Favorite")])),_:2},1032,["onClick"])):Y("",!0),k.value==="favorites"?(m(),_(e(U),{key:1,color:"danger",onClick:I=>z(I,n,"Remove Favorite")},{default:a(()=>l[10]||(l[10]=[u("Remove")])),_:2},1032,["onClick"])):Y("",!0)]),_:2},1024)]),_:2},1032,["data-track"]))),128))]),_:2},1024))),128))]),_:1},512),[[K,((p=c.value)==null?void 0:p.length)>0]]),J(t(e(le),null,{default:a(()=>l[11]||(l[11]=[u("No Sessions Found")])),_:1},512),[[K,((f=c.value)==null?void 0:f.length)===0]]),t(e(ye),{slot:"fixed",vertical:"bottom",horizontal:"end",ref_key:"fab",ref:w},{default:a(()=>[t(e(b),{ref_key:"fabButton",ref:C},{default:a(()=>[t(e(S),{icon:e(we)},null,8,["icon"])]),_:1},512),t(e(be),{ref_key:"fabList",ref:L,side:"top"},{default:a(()=>[t(e(b),{color:"vimeo",onClick:l[2]||(l[2]=i=>D("Vimeo"))},{default:a(()=>[t(e(S),{icon:e(he)},null,8,["icon"])]),_:1}),t(e(b),{color:"google",onClick:l[3]||(l[3]=i=>D("Google+"))},{default:a(()=>[t(e(S),{icon:e(xe)},null,8,["icon"])]),_:1}),t(e(b),{color:"twitter",onClick:l[4]||(l[4]=i=>D("Twitter"))},{default:a(()=>[t(e(S),{icon:e(Le)},null,8,["icon"])]),_:1}),t(e(b),{color:"facebook",onClick:l[5]||(l[5]=i=>D("Facebook"))},{default:a(()=>[t(e(S),{icon:e(De)},null,8,["icon"])]),_:1})]),_:1},512)]),_:1},512)]}),_:1})]),_:1}))}});const Ne=Re(ze,[["__scopeId","data-v-4848010a"]]);export{Ne as default};
