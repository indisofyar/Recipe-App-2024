import{_ as C,r as o,d as _,N,g as v,i as P,j as t,u as e,k as a,I as S,l as U,F as q,t as u,q as E,G as f,O as H,P as M,s as g,H as h,J as I,Q as b,x as k,R as j,M as A,A as V,B as D,C as F}from"./index-82be729b.js";import{b as w,a as G}from"./axios-0576eea1.js";const J={key:0},O={class:"ion-padding"},Q={__name:"Login",setup(R){const r=o(""),d=o(""),x=o(!1),i=o(!1),m=o(""),y=_(()=>!0),B=_(()=>!0),n=o(null),L=o(w),T=()=>{x.value=!0,y.value&&B.value&&G.post(w+"/api/user/login/",{email:r.value,password:d.value,name:"filler",tc:!0}).then(l=>{if(!l.data)throw new Error;localStorage.setItem("refreshToken",l.data.token.refresh),localStorage.setItem("accessToken",l.data.token.access),F.push({name:"meal-planner"})}).catch(l=>{let s="";if(l.response&&l.response.data.errors.email){for(const p of l.response.data.errors.email)s+=p;m.value=s,i.value=!0}else n.value=l,m.value=l.message,i.value=!0})};return(l,s)=>{const p=N("router-link");return v(),P(e(D),null,{default:t(()=>[a(e(E),null,{default:t(()=>[a(e(S),null,{default:t(()=>[a(e(U),{slot:"start"}),a(e(q),null,{default:t(()=>s[2]||(s[2]=[u("Login Hello")])),_:1})]),_:1})]),_:1}),a(e(V),{class:"ion-padding"},{default:t(()=>[u(f(n.value)+" "+f(L.value)+" ",1),n.value?(v(),H("span",J,f(n.value.message),1)):M("",!0),g("form",{onSubmit:j(T,["prevent"])},[a(e(h),null,{default:t(()=>[a(e(I),null,{default:t(()=>[a(e(b),{labelPlacement:"stacked",label:"Email",modelValue:r.value,"onUpdate:modelValue":s[0]||(s[0]=c=>r.value=c),name:"username",type:"text",required:""},null,8,["modelValue"])]),_:1}),a(e(I),null,{default:t(()=>[a(e(b),{labelPlacement:"stacked",label:"Password",modelValue:d.value,"onUpdate:modelValue":s[1]||(s[1]=c=>d.value=c),name:"password",type:"password",required:""},null,8,["modelValue"])]),_:1})]),_:1}),g("div",O,[a(e(k),{type:"submit",expand:"block"},{default:t(()=>s[3]||(s[3]=[u("Login")])),_:1})])],32),a(e(A),{"is-open":i.value,message:m.value,duration:2e3},null,8,["is-open","message"]),a(e(V),null,{default:t(()=>[a(p,{to:"/login"},{default:t(()=>[a(e(k),{fill:"clear"},{default:t(()=>s[4]||(s[4]=[u("Login")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}},W=C(Q,[["__scopeId","data-v-ce30b0a4"]]);export{W as default};
