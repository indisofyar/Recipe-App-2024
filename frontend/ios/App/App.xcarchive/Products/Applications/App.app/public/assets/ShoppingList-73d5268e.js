import{r as m,N as c,g as r,i as _,j as n,u as f,k as i,s as B,O as L,Y as V,Z as b,A as v,B as C}from"./index-82be729b.js";import{a as s,b as p}from"./axios-0576eea1.js";const N={__name:"ShoppingList",setup($){const u=m([]),d=()=>{s.get(p+"/api/recipes/shopping-list/").then(e=>{u.value=e.data})},k=m(!1);let l=localStorage.getItem("accessToken"),h="Bearer "+l;const T=localStorage.getItem("refreshToken");s.post(p+"/api/user/token/refresh/",{refresh:T}).then(e=>{localStorage.setItem("accessToken",e.data.access),l=localStorage.getItem("accessToken"),h="Bearer "+l,s.defaults.headers.common.Authorization=h,d()}).catch(e=>k.value=!0),d();const I=(e,t)=>{s.post("".concat(p,"/api/recipes/shopping-list/").concat(e,"/"),{checked:t}).then(a=>{console.log("Updated item ".concat(e," status to ").concat(t))}).catch(a=>{console.error("Failed to update item status:",a)})};return(e,t)=>{const a=c("ion-checkbox"),S=c("ion-item"),x=c("ion-list");return r(),_(f(C),null,{default:n(()=>[i(f(v),{fullscreen:!0,padding:"",class:"ion-padding"},{default:n(()=>[t[0]||(t[0]=B("h3",null,"Shopping List",-1)),i(x,null,{default:n(()=>[(r(!0),L(b,null,V(u.value.items,o=>(r(),_(S,null,{default:n(()=>[i(a,{"label-placement":"start",modelValue:o.checked,"onUpdate:modelValue":g=>o.checked=g,innerHTML:o.ingredient.text,onIonChange:g=>I(o.id,o.checked)},null,8,["modelValue","onUpdate:modelValue","innerHTML","onIonChange"])]),_:2},1024))),256))]),_:1})]),_:1})]),_:1})}}};export{N as default};
